!function(){function e(e,o,t){var n;return n=e.getWrapperElement().appendChild(document.createElement("div")),n.className=t?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top",n.innerHTML=o,n}CodeMirror.defineExtension("openDialog",function(o,t,n){function r(){c||(c=!0,i.parentNode.removeChild(i))}var i=e(this,o,n&&n.bottom),c=!1,s=this,a=i.getElementsByTagName("input")[0];return a?(CodeMirror.on(a,"keydown",function(e){(13==e.keyCode||27==e.keyCode)&&(CodeMirror.e_stop(e),r(),s.focus(),13==e.keyCode&&t(a.value))}),n&&n.value&&(a.value=n.value),a.focus(),CodeMirror.on(a,"blur",r)):(o=i.getElementsByTagName("button")[0])&&(CodeMirror.on(o,"click",function(){r(),s.focus()}),o.focus(),CodeMirror.on(o,"blur",r)),r}),CodeMirror.defineExtension("openConfirm",function(o,t,n){function r(){s||(s=!0,c.parentNode.removeChild(c),a.focus())}var i,c=e(this,o,n&&n.bottom),o=c.getElementsByTagName("button"),s=!1,a=this,f=1;for(o[0].focus(),n=0;n<o.length;++n)i=o[n],function(e){CodeMirror.on(i,"click",function(o){CodeMirror.e_preventDefault(o),r(),e&&e(a)})}(t[n]),CodeMirror.on(i,"blur",function(){--f,setTimeout(function(){0>=f&&r()},200)}),CodeMirror.on(i,"focus",function(){++f})})}(),function(){function e(e){return"string"==typeof e?{token:function(o){return o.match(e)?"searching":(o.next(),o.skipTo(e.charAt(0))||o.skipToEnd(),void 0)}}:{token:function(o){if(o.match(e))return"searching";for(;!o.eol()&&(o.next(),!o.match(e,!1)););}}}function o(){this.overlay=this.posFrom=this.posTo=this.query=null}function t(e,o,t){return e.getSearchCursor(o,t,"string"==typeof o&&o==o.toLowerCase())}function n(e,o,t,n){e.openDialog?e.openDialog(o,n):n(prompt(t,""))}function r(e,o,t,n){e.openConfirm?e.openConfirm(o,n):confirm(t)&&n[0]()}function i(e){var o=e.match(/^\/(.*)\/([a-z]*)$/);return o?RegExp(o[1],-1==o[2].indexOf("i")?"":"i"):e}function c(t,r){var c=t._searchState||(t._searchState=new o);return c.query?s(t,r):(n(t,u,"Search for:",function(o){t.operation(function(){o&&!c.query&&(c.query=i(o),t.removeOverlay(c.overlay),c.overlay=e(o),t.addOverlay(c.overlay),c.posFrom=c.posTo=t.getCursor(),s(t,r))})}),void 0)}function s(e,n){e.operation(function(){var r=e._searchState||(e._searchState=new o),i=t(e,r.query,n?r.posFrom:r.posTo);(i.find(n)||(i=t(e,r.query,n?CodeMirror.Pos(e.lastLine()):CodeMirror.Pos(e.firstLine(),0)),i.find(n)))&&(e.setSelection(i.from(),i.to()),r.posFrom=i.from(),r.posTo=i.to())})}function a(e){e.operation(function(){var t=e._searchState||(e._searchState=new o);t.query&&(t.query=null,e.removeOverlay(t.overlay))})}function f(e,o){n(e,l,"Replace:",function(c){c&&(c=i(c),n(e,h,"Replace with:",function(n){if(o)e.operation(function(){for(var o,r=t(e,c);r.findNext();)"string"!=typeof c?(o=e.getRange(r.from(),r.to()).match(c),r.replace(n.replace(/\$(\d)/,function(e,t){return o[t]}))):r.replace(n)});else{a(e);var i=t(e,c,e.getCursor()),s=function(){var o,n=i.from();((o=i.findNext())||(i=t(e,c),(o=i.findNext())&&(!n||i.from().line!=n.line||i.from().ch!=n.ch)))&&(e.setSelection(i.from(),i.to()),r(e,d,"Replace?",[function(){f(o)},s]))},f=function(e){i.replace("string"==typeof c?n:n.replace(/\$(\d)/,function(o,t){return e[t]})),s()};s()}}))})}var u='Search: <input type="text" style="width: 10em"/> <span style="color: #888">(Use /re/ syntax for regexp search)</span>',l='Replace: <input type="text" style="width: 10em"/> <span style="color: #888">(Use /re/ syntax for regexp search)</span>',h='With: <input type="text" style="width: 10em"/>',d="Replace? <button>Yes</button> <button>No</button> <button>Stop</button>";CodeMirror.commands.find=function(e){a(e),c(e)},CodeMirror.commands.findNext=c,CodeMirror.commands.findPrev=function(e){c(e,!0)},CodeMirror.commands.clearSearch=a,CodeMirror.commands.replace=f,CodeMirror.commands.replaceAll=function(e){f(e,!0)}}(),function(){function e(e,t,n,r){if(this.atOccurrence=!1,this.cm=e,null==r&&"string"==typeof t&&(r=!1),n=n?e.clipPos(n):o(0,0),this.pos={from:n,to:n},"string"!=typeof t)t.global||(t=RegExp(t.source,t.ignoreCase?"ig":"g")),this.matches=function(n,r){var i;if(n){t.lastIndex=0;for(var c=e.getLine(r.line).slice(0,r.ch),s=t.exec(c),a=0;s&&(a+=s.index+1,c=c.slice(a),t.lastIndex=0,i=t.exec(c));)s=i;a--}else t.lastIndex=r.ch,c=e.getLine(r.line),a=(s=t.exec(c))&&s.index;return s&&s[0]?{from:o(r.line,a),to:o(r.line,a+s[0].length),match:s}:void 0};else{r&&(t=t.toLowerCase());var i=r?function(e){return e.toLowerCase()}:function(e){return e},c=t.split("\n");this.matches=1==c.length?t.length?function(n,r){var c,s=i(e.getLine(r.line)),a=t.length;return(n?r.ch>=a&&-1!=(c=s.lastIndexOf(t,r.ch-a)):-1!=(c=s.indexOf(t,r.ch)))?{from:o(r.line,c),to:o(r.line,c+a)}:void 0}:function(){}:function(t,n){var r,s,a,f=n.line,u=t?c.length-1:0,l=c[u],h=i(e.getLine(f)),d=t?h.indexOf(l)+l.length:h.lastIndexOf(l);if(!(t?d>=n.ch||d!=l.length:d<=n.ch||d!=h.length-l.length))for(;!(t?!f:f==e.lineCount()-1);){if(h=i(e.getLine(f+=t?-1:1)),l=c[t?--u:++u],!(u>0&&u<c.length-1))return r=t?h.lastIndexOf(l):h.indexOf(l)+l.length,(t?r!=h.length-l.length:r!=l.length)?void 0:(s=o(n.line,d),a=o(f,r),{from:t?a:s,to:t?s:a});if(h!=l)break}}}}var o=CodeMirror.Pos;e.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){function t(e){return e=o(e,0),r.pos={from:e,to:e},r.atOccurrence=!1,!1}for(var n,r=this,i=this.cm.clipPos(e?this.pos.from:this.pos.to);;){if(this.pos=this.matches(e,i))return this.pos.from&&this.pos.to||console.log(this.matches,this.pos),this.atOccurrence=!0,this.pos.match||!0;if(e){if(!i.line)return t(0);i=o(i.line-1,this.cm.getLine(i.line-1).length)}else{if(n=this.cm.lineCount(),i.line==n-1)return t(n);i=o(i.line+1,0)}}},from:function(){return this.atOccurrence?this.pos.from:void 0},to:function(){return this.atOccurrence?this.pos.to:void 0},replace:function(e){this.atOccurrence&&(e=CodeMirror.splitLines(e),this.cm.replaceRange(e,this.pos.from,this.pos.to),this.pos.to=o(this.pos.from.line+e.length-1,e[e.length-1].length+(1==e.length?this.pos.from.ch:0)))}},CodeMirror.defineExtension("getSearchCursor",function(o,t,n){return new e(this,o,t,n)})}();