!function(){CodeMirror.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(e,t){return/^[;{}]$/.test(t)}}),CodeMirror.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(e,t,n,o){return this.jsonMode?/^[\[,{]$/.test(t)||/^}/.test(n):";"==t&&o.lexical&&")"==o.lexical.type?!1:/^[;{}]$/.test(t)&&!/^;/.test(n)}});var e=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;CodeMirror.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(t,n,o,r){var i=!1;return"html"==this.configuration&&(i=r.context?e.test(r.context.tagName):!1),!i&&("tag"==t&&/>$/.test(n)&&r.context||/^</.test(o))}}),CodeMirror.defineExtension("commentRange",function(e,t,n){var o=this,r=CodeMirror.innerMode(o.getMode(),o.getTokenAt(t).state).mode;o.operation(function(){if(e)o.replaceRange(r.commentEnd,n),o.replaceRange(r.commentStart,t),t.line==n.line&&t.ch==n.ch&&o.setCursor(t.line,t.ch+r.commentStart.length);else{var i=o.getRange(t,n),a=i.indexOf(r.commentStart),s=i.lastIndexOf(r.commentEnd);a>-1&&s>-1&&s>a&&(i=i.substr(0,a)+i.substring(a+r.commentStart.length,s)+i.substr(s+r.commentEnd.length)),o.replaceRange(i,t,n)}})}),CodeMirror.defineExtension("autoIndentRange",function(e,t){var n=this;this.operation(function(){for(var o=e.line;o<=t.line;o++)n.indentLine(o,"smart")})}),CodeMirror.defineExtension("autoFormatRange",function(e,t){for(var n=this,o=n.getMode(),r=n.getRange(e,t).split("\n"),i=CodeMirror.copyState(o,n.getTokenAt(e).state),a=n.getOption("tabSize"),s="",c=0,m=0==e.ch,d=0;d<r.length;++d){for(var l=new CodeMirror.StringStream(r[d],a);!l.eol();){var g=CodeMirror.innerMode(o,i),f=o.token(l,i),u=l.current();l.start=l.pos,(!m||/\S/.test(u))&&(s+=u,m=!1),!m&&g.mode.newlineAfterToken&&g.mode.newlineAfterToken(f,u,l.string.slice(l.pos)||r[d+1]||"",g.state)&&(s+="\n",m=!0,++c)}!l.pos&&o.blankLine&&o.blankLine(i),!m&&d<r.length-1&&(s+="\n",m=!0,++c)}n.operation(function(){n.replaceRange(s,e,t);for(var o=e.line+1,r=e.line+c;r>=o;++o)n.indentLine(o,"smart");n.setSelection(e,n.getCursor(!1))})})}();