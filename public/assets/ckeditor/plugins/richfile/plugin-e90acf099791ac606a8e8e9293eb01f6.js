!function(){CKEDITOR.plugins.add("richfile",{init:function(e){e._.insertImagefn=CKEDITOR.tools.addFunction(function(e,i){this.insertHtml('<img src="'+e+'" alt="" data-rich-file-id="'+i+'" />')},e),e._.insertFilefn=CKEDITOR.tools.addFunction(function(e,i,n){this.insertHtml('<a href="'+e+'" data-rich-file-id="'+i+'">'+n+"</a>")},e),e.on("doubleclick",function(i){var n=i.data.element;!n.is("img")||n.data("cke-realelement")||n.isReadOnly()||e.execCommand("insertRichImage")}),e.on("destroy",function(){CKEDITOR.tools.removeFunction(this._.insertImagefn)}),e.addCommand("insertRichImage",{exec:function(e){var i={};i.CKEditor=e.name,i.CKEditorFuncNum=e._.insertImagefn,i.default_style=e.config.default_style,i.allowed_styles=e.config.allowed_styles,i.insert_many=e.config.insert_many,i.type="image",i.scoped=e.config.scoped||!1,1==i.scoped&&(i.scope_type=e.config.scope_type,i.scope_id=e.config.scope_id),i.viewMode=e.config.view_mode||"grid";var n=addQueryString(e.config.richBrowserUrl,i);e.popup(n,860,500)}}),e.addCommand("insertRichFile",{exec:function(e){var i={};i.CKEditor=e.name,i.CKEditorFuncNum=e._.insertFilefn,i.default_style="original",i.allowed_styles="original",i.insert_many=e.config.insert_many,i.type="file",1==i.scoped&&(i.scope_type=e.config.scope_type,i.scope_id=e.config.scope_id),i.viewMode=e.config.view_mode||"list";var n=addQueryString(e.config.richBrowserUrl,i);e.popup(n,860,500)}}),e.ui.addButton("richImage",{label:"Browse and upload images",command:"insertRichImage",icon:"/assets/rich/images-4c5801c27b7a49a4268412cc1d738808.png"}),e.ui.addButton("richFile",{label:"Browse and upload files",command:"insertRichFile",icon:"/assets/rich/files-ac28d79e2b36093d371e6b7057ce651a.png"})}})}();