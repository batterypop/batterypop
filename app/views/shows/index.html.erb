<div class="main channel">
  <div class="container">
    <div class="content">

<% colors = ["aqua","purple","gold","orangered","green","steelblue","red","mint"]
pos = 0 %>

<!-- page header; break off? -->
      <div class="row">
        <div class="col-lg-12 text-center channel-page-header">
          <div class="channel-icon pull-right"></div>
          <div class="channel-icon pull-left"></div>
          <h1 class="page-title">SHOWS</h1>
          <h4 class="page-title fill top bottom left right margin padding ">The best web series around! Catch the shows everyone is talking about right here, and share your favorites with your friends.</h4>
        </div>
      </div>
<!-- page header end; break off? -->



<% @shows.each_with_index do |show| %>
<%  
  if(pos >= (colors.count-1)) 
    pos =0 
  else
    pos = pos + 1
  end
%>


<!-- lower listings -->
    <div class="row show-name-episodes-section <%= colors[pos] %>">
  <a href="<%= show_path(show) %>">
      <div class="col-xs-12 col-md-6 show-name">
			<div class="show-metadata">
				<div class="show-icon-border">
					<div class="show-icon-container <%= colors[pos] %>">
						<%= image_tag(show.image(:thumbnail), :alt => show.title, :class => "img-responsive thumbnail media-object show-episode-image", :width => '160') %>
					</div>
				</div>

				<h2><%= "#{show.title}" %></h2>
            	<%= show.description.html_safe %>
				<!--
				Voting partial 
				-->
				<div class="flash-plus-voting">
           <%= render :partial => "shows/follow_show", :locals => {:show => show} %>
				</div>
			</div>
 	  </div>
   </a>
      <div class="col-xs-12 col-md-6 show-episodes">

<!-- episode slider -->
       <!--  <div class="row bpop-slider"> -->
            <ul class="bxslider show-episodes-slider">
                <% show.episodes.each do |episode| %>
                  <li>
                    <%= render partial: "layouts/vertical_slide", :locals => {
                      :slide_title => episode.title, 
                      :slide_text => truncate_html(strip_tags(episode.description), length: 100, omission: '<b>...(more)</b>'), 
                      :slide_image => image_tag(episode.image(:thumb), :alt => episode.title, :class => "img-responsive img-circle", :width => '110', :height => '110' ),
                      :slide_url => episode_path(Episode.friendly.find(episode.id))} %>
                  </li>
                <% end %>
            </ul>
       <!--  </div>        -->
<!-- end episode slider -->



      </div>
    </div>

<!-- end lower listings -->
<% end %>



    </div>
  </div>
</div>

<!-- 
nextSelector: '#home-promoted-next',
prevSelector: '#home-promoted-prev',
nextText: 'NEXT', prevText: 'PREV',
-->


<!-- home items inited -->
<script type="text/javascript">
  $(document).ready(function(){
    $('.show-episodes-slider').bxSlider({
        minSlides: 2,
        maxSlides: 4,
        slideWidth: 170,
        responsive: true,
        touchEnabled: true,
        slideMargin: 10,
        moveSlides: 2,
        infiniteLoop: false,
        hideControlOnEnd: true,
        slideMargin: 0, 
        pager: false
      });

  });
</script>