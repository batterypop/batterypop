<div class="main channel">
  <div class="container">
    <div class="content">

<% pos = 0 %>


<!-- page header; break off? -->
<div class="row">
	<div class="col-xs-12 two-tone-banner text-center show-page-header aqua fill top bottom left right margin padding">
		<div class="vert-middle-wrap">
			<div class="vert-middle">
				<%= image_tag("channel_headers/tv.png", :class=> "tv-image") %>
			</div>
			<div class="vert-middle category-info turquoise">
				<h1 class="page-title">
					SHOWS
				</h1>
				<h4 class="page-title hidden-xs ">
					The best web series around! Catch the shows everyone is talking about right here, and share your favorites with your friends.
				</h4>
			</div>
			<div class="vert-middle">
				<%= image_tag("channel_headers/tv.png", :class=> "tv-image") %>
			</div>
		</div>
	</div>
</div>
<!-- page header end; break off? -->


<%= will_paginate @shows %>

<% @shows.each do |show| %>
<%  
  if(pos >= (colors.count-1)) 
    pos =0 
  else
    pos = pos + 1
  end
%>


<!-- lower listings -->
  <div class="row show-name-episodes-section <%= colors[pos] %>">
     <a href="/shows/<%= show.slug %>">
      <div class="col-xs-12 col-lg-6 col-md-7 show-name">
			<div class="show-metadata">
				<div class="show-icon-border hidden-xs">
					<div class="show-icon-container <%= colors[pos] %>">
						<%= image_tag(show.image(:thumb), :alt => show.title, :class => "img-responsive thumbnail media-object show-episode-image", :width => '160') %>
					</div>
				</div>

				<h2><%= "#{show.title}" %></h2>
            	<%= show.description.html_safe %>
				<!--
				Voting partial 
				-->
				
			</div>
 	  </div>
  </a>
      <div class="col-xs-12 col-lg-6 col-md-5 show-episodes">

<!-- episode slider -->

            <ul class="bxslider show-episodes-slider">
                <% show.episodes.each do |episode| %>
                  <li>
                    <%= render partial: "layouts/vertical_slide", :locals => {
                      :slide_title => episode.title, 
                      :slide_text => truncate_html(strip_tags(episode.description), length: 100, omission: '<b>...(more)</b>'), 
                      :slide_image => image_tag(episode.image(:thumb), :alt => episode.title, :class => "img-responsive img-circle", :width => '110', :height => '110' ),
                      
                      #:slide_url => episode_path(Episode.friendly.find(episode.id))
              
                      :slide_url => "/shows/" + show.slug + "/episodes/" + episode.slug,
                      :slide_class => !episode.friends.approved.empty? ? "sponsor": nil

                      } %>
                  </li>
                <% end %>
            </ul>



      </div>
    </div>

<!-- end lower listings -->
<% end %>

<%= will_paginate @posts %>

    </div>
  </div>
</div>


<!-- home items inited -->
<script type="text/javascript">
  $(document).ready(function(){
    $('.show-episodes-slider').bxSlider({
        minSlides: 2,
        maxSlides: 4,
        slideWidth: 170,
        responsive: true,
        touchEnabled: true,
        slideMargin: 10,
        moveSlides: 2,
        infiniteLoop: false,
        hideControlOnEnd: true,
        slideMargin: 0, 
        pager: false
      });

  });
</script>